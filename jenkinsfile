pipeline{
    agent any
    stages{
        stage("Check out the repo"){
            steps{
                sh 'git clone https://github.com/shri69/java-code1'
            }
        }
        stage("Navigate to the Repo"){
             steps{
                sh 'cd ${WORKSPACE}/java-code1'

        }

        }
       
            
            stage("Maven clean"){
                steps{
                    sh 'mvn clean'
                }
            }
            stage("Maven Build"){
                steps{
                    sh 'mvn compile'
                }
            }
            stage("Unit Test") {          	 
            steps {  	 
                sh "mvn test"          	 
            }
        }
        stage("Maven Package") {
            steps {
                sh "mvn package"
            }
        }
        stage('deploy to tomcat') {
            steps {
              deploy adapters: [tomcat9(url: 'http://localhost:8090/', 
                              credentialsId: 'tomcat')], 
                     war: 'target/*.war',
                     contextPath: 'webapps'
            }
        }
            
            
    }
}